server:
  host: 0.0.0.0
  port: 9999
  mode: debug
  read_timeout: 10
  write_timeout: 10

database:
  driver: mysql
  host: 38.14.250.76
  port: 3306
  user: rei0721
  password: admin
  dbname: rei0721db
  max_open_conns: 100
  max_idle_conns: 10

redis:
  # 是否启用 Redis 缓存
  # true: 启用, false: 禁用（应用将在无缓存模式下运行）
  enabled: true
  host: 38.14.250.76
  port: 6379
  password: redis_858b27
  # Redis 数据库索引 (0-15)
  # 不同环境可以使用不同的 DB 来隔离数据
  # 开发: 0, 测试: 1, 生产: 0
  db: 0

  # 连接池大小
  # 决定最多可以同时建立多少个 Redis 连接
  # 推荐值:
  #   - 小型应用: 10
  #   - 中型应用: 20-50
  #   - 大型应用: 100+
  pool_size: 30

  # 最小空闲连接数
  # 保持一定数量的空闲连接可以减少连接建立延迟
  # 通常设置为 poolSize 的 30-50%
  min_idle_conns: 10

  # 最大重试次数
  # 当命令执行失败时自动重试的次数
  # 0 表示不重试
  # 推荐: 2-3 次
  max_retries: 3

  # 连接超时时间（秒）
  # 建立 TCP 连接的最大等待时间
  # 推荐: 5 秒
  dial_timeout: 5

  # 读取超时时间（秒）
  # 从 Redis 读取响应的最大等待时间
  # 推荐: 3 秒
  read_timeout: 3

  # 写入超时时间（秒）
  # 向 Redis 写入命令的最大等待时间
  # 推荐: 3 秒
  write_timeout: 3

logger:
  # 日志级别
  # 可选值: debug, info, warn, error
  # 开发环境推荐: debug
  # 生产环境推荐: info
  level: debug

  # 默认日志格式（如果未设置专用格式则使用此值）
  # json: JSON 格式，便于日志系统解析（生产环境推荐）
  # console: 控制台格式，人类易读（开发环境推荐）
  format: console

  # 控制台输出专用格式（可选）
  # 如果设置，控制台输出使用此格式，否则使用 format
  # 推荐: console（易读）
  console_format: console

  # 文件输出专用格式（可选）
  # 如果设置，文件输出使用此格式，否则使用 format
  # 推荐: json（便于日志系统解析）
  file_format: json

  # 日志输出目标
  # stdout: 仅输出到控制台（适合容器环境、开发调试）
  # file: 仅输出到文件（适合传统部署、需要持久化日志）
  # both: 同时输出到文件和控制台（适合开发环境、需要实时查看又要保存日志）
  output: both

  # 日志文件路径（仅当 output 为 file 或 both 时有效）
  file_path: logs/app.log

  # 单个日志文件最大大小（MB）
  # 超过此大小会自动轮转创建新文件
  max_size: 10

  # 保留的旧日志文件最大数量
  # 超过此数量会删除最旧的文件
  max_backups: 10

  # 保留旧日志文件的最大天数
  # 超过此天数会自动删除
  max_age: 30

i18n:
  default: zh-CN
  supported:
    - zh-CN
    - en-US
  messages_dir: ./configs/locales

# 数据库初始化配置
initdb:
  # 初始化脚本目录
  script_dir: ./scripts/initdb
  # 初始化锁文件
  lock_file: .initialized
  # 初始化脚本文件名前缀
  script_file_prefix: initdb

# 执行器配置
# 管理异步任务的协程池,支持多池隔离
executor:
  # 是否启用执行器
  # true: 启用, false: 禁用
  enabled: true

  # 池配置列表
  # 每个池独立管理一类任务,实现资源隔离
  pools:
    # HTTP 请求处理池
    # 用于处理 HTTP 请求相关的异步任务
    - name: http
      size: 200 # 池容量(最大并发 worker 数)
      expiry: 10 # worker 过期时间(秒)
      non_blocking: true # 非阻塞模式(池满时立即返回错误)

    # 数据库操作池
    # 用于处理数据库相关的异步任务
    - name: database
      size: 50
      expiry: 30
      non_blocking: false # 阻塞模式(池满时等待)

    # 缓存操作池
    # 用于异步缓存更新、预热等操作
    - name: cache
      size: 30
      expiry: 15
      non_blocking: true # 非阻塞模式(缓存操作可降级)

    # 日志处理池
    # 用于异步日志刷新、日志上传等操作
    - name: logger
      size: 10
      expiry: 60
      non_blocking: false # 阻塞模式(确保日志不丢失)

    # 后台任务池
    # 用于处理邮件发送、文件处理等后台任务
    - name: background
      size: 30
      expiry: 60
      non_blocking: true

# JWT 认证配置
# 用于token的生成和验证
jwt:
  # 签名密钥（必须从环境变量设置）
  # 生产环境: export JWT_SECRET=your-secret-key-at-least-32-characters-long
  # 安全要求: 至少32个字符的随机字符串
  secret: "your-secret-key-must-be-at-least-32-characters-long" # 留空，从环境变量 JWT_SECRET 读取

  # 令牌有效期（秒）
  # 1小时 = 3600秒, 24小时 = 86400秒
  # 根据业务安全要求调整:
  #   - 高安全场景: 900-1800 (15-30分钟)
  #   - 一般场景: 3600-7200 (1-2小时)
  #   - 低敏感场景: 86400 (24小时)
  expiresIn: 3600

  # 签发者标识
  # 用于标识token的来源系统
  # 多系统环境下可以区分不同来源的token
  issuer: "go-scaffold"

rbac:
  # 是否启用 RBAC
  # true: 启用, false: 禁用
  enabled: true

  # 模型文件路径
  # 如果为空，将使用pkg/rbac目录下的内置model.conf
  model_path: ""

  # 是否启用缓存
  # true: 启用, false: 禁用
  enable_cache: true

  # 缓存过期时间（秒）
  # 0 表示永不过期
  cache_ttl: 3600

  # 是否自动保存策略
  # true: 自动保存, false: 手动保存
  auto_save: true

  # 表前缀
  # 用于区分不同数据库的表
  table_prefix: "rbac_"
