---
name: 错误处理规范
description: 统一错误处理与错误码管理规范
category: 支撑
priority: 7
dependencies: [00-project-map, 12-api, 04-reusables]
---

# 错误处理规范

## 职责范围

- 统一错误码与错误类型管理
- 规范服务端错误包装与返回方式
- 约束对外暴露的信息边界

## 适用场景

- 新增错误码
- 新增业务错误
- 处理跨层错误传递

## 核心规则

1. 错误码统一定义在 `types/errors/codes.go`
2. 业务错误统一使用 `types/errors.BizError`
3. Service 层必须包装底层错误后返回
4. Handler 层必须映射错误码到 HTTP 状态
5. 对外响应不得包含底层错误详情

## 错误码范围

| 范围 | 类型 | HTTP 状态 |
| ---- | ---- | --------- |
| 1000-1999 | 参数错误 | 400 |
| 2000-2999 | 业务错误 | 422 |
| 3000-3999 | 认证授权 | 401 |
| 4000-4999 | 资源错误 | 404 |
| 5000-5999 | 系统错误 | 500 |

## AI 行为约束

- 禁止新增未登记的错误码
- 禁止返回原始数据库或内部错误
- 禁止在 Handler 中直接构造非标准错误响应

## 更新规则

- 新增错误码范围或分类
- 变更错误响应映射策略

---

**最后更新**: 2026-01-19
**维护者**: AI Assistant
