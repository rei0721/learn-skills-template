---
name: 开发流程
description: 新功能开发、重构和 Bug 修复的工作流程
category: 边缘
priority: 10
dependencies: [00-project-map, 01-project-foundation, 02-design-specs, 03-rules]
---

# 开发流程

## 职责范围

- 新功能开发流程
- 代码重构流程
- Bug 修复流程
- 代码审查流程

## 适用场景

- 开发新功能
- 重构现有代码
- 修复 Bug
- 代码审查

## 核心规则

### 1. 新功能开发流程

#### 步骤

1. **需求分析**
   - 确认功能需求
   - 确认是否符合项目目标
   - 确认是否在项目边界内

2. **设计**
   - 确认模块归属
   - 设计数据模型
   - 设计 API 接口
   - 确认依赖关系

3. **实现**
   - 创建数据模型（internal/models）
   - 实现 Repository（internal/repository）
   - 实现 Service（internal/service）
   - 实现 Handler（internal/handler）
   - 注册路由（internal/router）

4. **测试**
   - 编写单元测试
   - 编写集成测试
   - 运行所有测试
   - 检查测试覆盖率

5. **文档**
   - 更新 API 文档
   - 更新技能书（如果需要）
   - 添加代码注释
   - **更新 docs 文档（参考 15-documentation 技能书）**

6. **审查**
   - 自我审查
   - 代码审查
   - 修复问题

### 2. 重构流程

#### 步骤

1. **评估**
   - 确认重构目标
   - 评估影响范围
   - 确认风险等级

2. **准备**
   - 确保测试覆盖率足够
   - 备份现有代码
   - 通知相关人员

3. **执行**
   - 小步重构
   - 每步运行测试
   - 保持功能不变

4. **验证**
   - 运行所有测试
   - 手动测试
   - 性能测试（如果需要）

5. **文档**
   - 更新相关文档
   - 更新技能书（如果需要）
   - **更新 docs 文档（如果架构变更）**

### 3. Bug 修复流程

#### 步骤

1. **重现**
   - 重现 Bug
   - 确认影响范围
   - 确认严重程度

2. **定位**
   - 查看日志
   - 调试代码
   - 确认根本原因

3. **修复**
   - 修复代码
   - 添加测试（防止回归）
   - 运行所有测试

4. **验证**
   - 验证 Bug 已修复
   - 验证没有引入新问题
   - 手动测试

5. **文档**
   - 记录 Bug 原因
   - 更新相关文档
   - **更新 FAQ（如果是常见问题）**

### 4. 代码审查清单

#### 功能性

- [ ] 功能符合需求
- [ ] 没有明显的 Bug
- [ ] 边界条件处理正确
- [ ] 错误处理完善

#### 架构

- [ ] 遵守分层架构
- [ ] 依赖方向正确
- [ ] 没有循环依赖
- [ ] 职责划分清晰

#### 代码质量

- [ ] 代码可读性好
- [ ] 命名规范
- [ ] 注释充分
- [ ] 没有重复代码

#### 安全

- [ ] 没有 SQL 注入风险
- [ ] 密码已加密
- [ ] 敏感信息已脱敏
- [ ] 权限检查完善

#### 测试

- [ ] 有单元测试
- [ ] 测试覆盖率达标
- [ ] 测试可重复运行
- [ ] 没有失败的测试

#### 文档

- [ ] API 文档已更新
- [ ] 代码注释充分
- [ ] 技能书已更新（如果需要）
- [ ] **docs 文档已更新（如果需要）**
- [ ] **changelog.md 已更新（如果是功能变更）**

## AI 行为约束

### 必须遵守

1. 严格遵循开发流程
2. 不跳过任何步骤
3. 确保测试通过
4. 更新相关文档

### 禁止行为

1. 禁止跳过测试
2. 禁止不经审查直接提交
3. 禁止修改未理解的代码
4. 禁止引入未经测试的代码

---

**最后更新**: 2026-01-19
